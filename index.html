 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day.OS - AI Life Planner</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel (to interpret JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 10s infinite;
        }
        .animation-delay-2000 {
            animation-delay: 2s;
        }
        .animation-delay-4000 {
            animation-delay: 4s;
        }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }
        .custom-scrollbar {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONS (Inlined for Single File Portability) ---
        // Helper to render SVG content. 
        // Note: Multi-element icons are wrapped in fragments <>...</> to fix JSX syntax errors.
        const Icon = ({ path, className, size = 24 }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const ICONS = {
            Smile: <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z"/>,
            Zap: <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>,
            BatteryLow: <><rect width="16" height="10" x="2" y="7" rx="2" ry="2"/><line x1="22" x2="22" y1="11" y2="13"/><line x1="6" x2="6" y1="11" y2="13"/></>,
            ThermometerSnowflake: <><path d="M2 12h10"/><path d="M9 4v16"/><path d="M3 9l3 3-3 3"/><path d="M12 9L9 12l3 3"/><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></>,
            Target: <><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></>,
            PartyPopper: <><path d="M5.8 11.3 2 22l10.7-3.79"/><path d="M4 3h.01"/><path d="M22 8h.01"/><path d="M15 2h.01"/><path d="M22 20h.01"/><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12v0c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"/><path d="m22 13-.82-.33c-.86-.34-1.82.2-2.08 1.15v0c-.27.98-.81 1.82-1.85 2.2v0"/><path d="m21 2-9.6 9.6"/></>,
            Compass: <><circle cx="12" cy="12" r="10"/><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"/></>,
            Clock: <><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></>,
            MapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>,
            Utensils: <><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></>,
            Music: <><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></>,
            Navigation: <polygon points="3 11 22 2 13 21 11 13 3 11"/>,
            Send: <><path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/></>,
            Loader2: <path d="M21 12a9 9 0 1 1-6.219-8.56"/>,
            Youtube: <><path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"/><path d="m10 15 5-3-5-3z"/></>,
            Plus: <><path d="M5 12h14"/><path d="M12 5v14"/></>,
            Bell: <><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></>,
            CheckCircle2: <><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></>,
            PlayCircle: <><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></>,
            Globe: <><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></>
        };

        // --- APP DATA CONFIGURATION ---

        const MODE_CONFIG = {
            HAPPY: { id: 'happy', label: 'Radiant', icon: 'Smile', gradient: 'from-yellow-300 via-orange-200 to-yellow-100', text: 'text-yellow-900', accent: 'bg-yellow-400', desc: 'Optimizing for joy and continued serotonin flow.' },
            EXCITED: { id: 'excited', label: 'Electric', icon: 'Zap', gradient: 'from-orange-300 via-red-200 to-orange-100', text: 'text-orange-900', accent: 'bg-orange-400', desc: 'High energy detected. Channeling into creative output.' },
            LOW: { id: 'low', label: 'Cozy', icon: 'BatteryLow', gradient: 'from-slate-300 via-indigo-200 to-slate-100', text: 'text-slate-800', accent: 'bg-slate-400', desc: 'Conserving energy. Minimal viable productivity engaged.' },
            SICK: { id: 'sick', label: 'Healing', icon: 'ThermometerSnowflake', gradient: 'from-teal-300 via-emerald-200 to-teal-100', text: 'text-teal-900', accent: 'bg-teal-400', desc: 'Immune system priority. Rest protocols active.' },
            FOCUSSED: { id: 'focussed', label: 'Flow State', icon: 'Target', gradient: 'from-blue-300 via-indigo-300 to-blue-100', text: 'text-indigo-900', accent: 'bg-indigo-500', desc: 'Deep work block. Distractions eliminated.' },
            CELEBRATION: { id: 'celebration', label: 'Sparkle', icon: 'PartyPopper', gradient: 'from-pink-300 via-rose-200 to-pink-100', text: 'text-pink-900', accent: 'bg-pink-400', desc: 'Dopamine maximization. It is time to party.' },
            ADVENTURE: { id: 'adventure', label: 'Wild', icon: 'Compass', gradient: 'from-green-300 via-emerald-200 to-green-100', text: 'text-emerald-900', accent: 'bg-emerald-500', desc: 'Exploration mode. Unknown paths selected.' }
        };

        const DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        const CUISINES = ['Global', 'Indian', 'Italian', 'Mexican'];
        const MUSIC_TYPES = ['Hollywood', 'Bollywood'];

        const generateDailyPlan = (modeId, day, cuisineType, musicType) => {
            const musicMap = {
                happy: { Hollywood: { track: "Walking On Sunshine", artist: "Katrina & The Waves" }, Bollywood: { track: "Gallan Goodiyaan", artist: "Dil Dhadakne Do" } },
                excited: { Hollywood: { track: "Don't Stop Me Now", artist: "Queen" }, Bollywood: { track: "Abhi Toh Party Shuru Hui Hai", artist: "Badshah" } },
                low: { Hollywood: { track: "Holocene", artist: "Bon Iver" }, Bollywood: { track: "Kun Faya Kun", artist: "A.R. Rahman" } },
                sick: { Hollywood: { track: "Weightless", artist: "Marconi Union" }, Bollywood: { track: "Iktara", artist: "Wake Up Sid" } },
                focussed: { Hollywood: { track: "Cornfield Chase", artist: "Hans Zimmer" }, Bollywood: { track: "Lakshya (Title Track)", artist: "Shankar-Ehsaan-Loy" } },
                celebration: { Hollywood: { track: "Good Times", artist: "Chic" }, Bollywood: { track: "Badtameez Dil", artist: "Yeh Jawaani Hai Deewani" } },
                adventure: { Hollywood: { track: "Born to be Wild", artist: "Steppenwolf" }, Bollywood: { track: "Ilahi", artist: "Arijit Singh" } }
            };

            const foodMap = {
                happy: {
                    Global: [{ type: "Breakfast", item: "Acai Bowl with Granola" }, { type: "Lunch", item: "Caprese Panini" }, { type: "Snack", item: "Mango Smoothie" }, { type: "Dinner", item: "Spinach & Ricotta Ravioli" }],
                    Indian: [{ type: "Breakfast", item: "Poha with Pomegranate" }, { type: "Lunch", item: "Paneer Tikka Masala & Naan" }, { type: "Snack", item: "Bhel Puri" }, { type: "Dinner", item: "Vegetable Biryani" }],
                    Italian: [{ type: "Breakfast", item: "Ricotta & Honey Toast" }, { type: "Lunch", item: "Margherita Pizza" }, { type: "Snack", item: "Gelato" }, { type: "Dinner", item: "Mushroom Risotto" }],
                    Mexican: [{ type: "Breakfast", item: "Huevos Rancheros" }, { type: "Lunch", item: "Veggie Quesadilla" }, { type: "Snack", item: "Guacamole & Chips" }, { type: "Dinner", item: "Bean Enchiladas" }]
                },
                excited: {
                    Global: [{ type: "Breakfast", item: "Spicy Avocado Toast" }, { type: "Lunch", item: "Mexican Bean Burrito" }, { type: "Snack", item: "Dark Chocolate & Nuts" }, { type: "Dinner", item: "Vegetable Stir Fry with Tofu" }],
                    Indian: [{ type: "Breakfast", item: "Masala Dosa" }, { type: "Lunch", item: "Chole Bhature" }, { type: "Snack", item: "Samosa Chaat" }, { type: "Dinner", item: "Kadai Paneer" }],
                    Italian: [{ type: "Breakfast", item: "Frittata with Peppers" }, { type: "Lunch", item: "Spicy Arrabbiata Pasta" }, { type: "Snack", item: "Bruschetta" }, { type: "Dinner", item: "Four Cheese Pizza" }],
                    Mexican: [{ type: "Breakfast", item: "Chilaquiles Rojos" }, { type: "Lunch", item: "Spicy Bean Burrito" }, { type: "Snack", item: "Elote" }, { type: "Dinner", item: "Vegetarian Fajitas" }]
                },
                low: {
                    Global: [{ type: "Breakfast", item: "Warm Oatmeal with Honey" }, { type: "Lunch", item: "Grilled Cheese & Tomato Soup" }, { type: "Snack", item: "Chamomile Tea" }, { type: "Dinner", item: "Macaroni & Cheese" }],
                    Indian: [{ type: "Breakfast", item: "Upma" }, { type: "Lunch", item: "Dal Tadka & Rice" }, { type: "Snack", item: "Masala Chai" }, { type: "Dinner", item: "Aloo Gobi & Roti" }],
                    Italian: [{ type: "Breakfast", item: "Warm Cornetto" }, { type: "Lunch", item: "Minestrone Soup" }, { type: "Snack", item: "Biscotti" }, { type: "Dinner", item: "Gnocchi Butter Sage" }],
                    Mexican: [{ type: "Breakfast", item: "Oatmeal with Cinnamon" }, { type: "Lunch", item: "Tortilla Soup" }, { type: "Snack", item: "Warm Churros" }, { type: "Dinner", item: "Cheese Quesadilla" }]
                },
                sick: {
                    Global: [{ type: "Breakfast", item: "Ginger Tea & Toast" }, { type: "Lunch", item: "Clear Vegetable Soup" }, { type: "Snack", item: "Fresh Orange Juice" }, { type: "Dinner", item: "Steamed Veggies & Rice" }],
                    Indian: [{ type: "Breakfast", item: "Idli" }, { type: "Lunch", item: "Moong Dal Khichdi" }, { type: "Snack", item: "Turmeric Milk" }, { type: "Dinner", item: "Curd Rice" }],
                    Italian: [{ type: "Breakfast", item: "Fresh Fruit" }, { type: "Lunch", item: "Pastina in Broth" }, { type: "Snack", item: "Herbal Tea" }, { type: "Dinner", item: "Plain Risotto" }],
                    Mexican: [{ type: "Breakfast", item: "Papaya & Lime" }, { type: "Lunch", item: "Caldo de Verduras" }, { type: "Snack", item: "Coconut Water" }, { type: "Dinner", item: "Rice & Beans (Mild)" }]
                },
                focussed: {
                    Global: [{ type: "Breakfast", item: "Greek Yogurt & Walnuts" }, { type: "Lunch", item: "Quinoa Salad" }, { type: "Snack", item: "Green Tea & Almonds" }, { type: "Dinner", item: "Grilled Tofu" }],
                    Indian: [{ type: "Breakfast", item: "Sprouts Salad" }, { type: "Lunch", item: "Palak Paneer" }, { type: "Snack", item: "Roasted Makhana" }, { type: "Dinner", item: "Dal Makhani & Rice" }],
                    Italian: [{ type: "Breakfast", item: "Avocado Toast" }, { type: "Lunch", item: "Caprese Salad" }, { type: "Snack", item: "Olives & Cheese" }, { type: "Dinner", item: "Pasta Primavera" }],
                    Mexican: [{ type: "Breakfast", item: "Veggie Scramble" }, { type: "Lunch", item: "Burrito Bowl" }, { type: "Snack", item: "Cucumber & Lime" }, { type: "Dinner", item: "Stuffed Peppers" }]
                },
                celebration: {
                    Global: [{ type: "Breakfast", item: "Vegetarian Eggs Benedict" }, { type: "Lunch", item: "Truffle Pizza" }, { type: "Snack", item: "Gelato" }, { type: "Dinner", item: "Eggplant Parmesan" }],
                    Indian: [{ type: "Breakfast", item: "Halwa Puri" }, { type: "Lunch", item: "Special Thali" }, { type: "Snack", item: "Gulab Jamun" }, { type: "Dinner", item: "Paneer Butter Masala" }],
                    Italian: [{ type: "Breakfast", item: "Tiramisu Pancakes" }, { type: "Lunch", item: "Gnocchi Sorrentina" }, { type: "Snack", item: "Cannoli" }, { type: "Dinner", item: "Lasagna" }],
                    Mexican: [{ type: "Breakfast", item: "Breakfast Burrito Grande" }, { type: "Lunch", item: "Nachos Supreme" }, { type: "Snack", item: "Tres Leches Cake" }, { type: "Dinner", item: "Enchiladas Suizas" }]
                },
                adventure: {
                    Global: [{ type: "Breakfast", item: "Trail Mix & Fruit" }, { type: "Lunch", item: "Falafel Wrap" }, { type: "Snack", item: "Energy Bar" }, { type: "Dinner", item: "Vegetable Paella" }],
                    Indian: [{ type: "Breakfast", item: "Aloo Paratha Roll" }, { type: "Lunch", item: "Vada Pav" }, { type: "Snack", item: "Masala Peanuts" }, { type: "Dinner", item: "Pav Bhaji" }],
                    Italian: [{ type: "Breakfast", item: "Panino with Cheese" }, { type: "Lunch", item: "Pizza Slice" }, { type: "Snack", item: "Arancini" }, { type: "Dinner", item: "Pasta Puttanesca" }],
                    Mexican: [{ type: "Breakfast", item: "Breakfast Tacos" }, { type: "Lunch", item: "Street Tacos" }, { type: "Snack", item: "Fruit with Tajin" }, { type: "Dinner", item: "Tostadas" }]
                }
            };

            let schedule = [];
            
            // Basic schedule logic (can be expanded)
            if (modeId === 'focussed') {
                schedule = [
                    { time: '08:00 AM', task: 'Morning Routine', loc: 'Home', map: 'Home' },
                    { time: '09:00 AM', task: 'Review Priorities', loc: 'Workspace', map: 'Home' },
                    { time: '10:00 AM', task: 'Deep Work Block I', loc: 'Quiet Zone', map: 'Library' },
                    { time: '12:00 PM', task: 'Light Lunch', loc: 'Garden', map: 'Park' },
                    { time: '02:00 PM', task: 'Deep Work Block II', loc: 'Office', map: 'Coworking Space' },
                    { time: '05:00 PM', task: 'Admin & Emails', loc: 'Office', map: 'Office' },
                    { time: '07:00 PM', task: 'Dinner', loc: 'Home', map: 'Home' },
                    { time: '09:00 PM', task: 'Reading', loc: 'Living Room', map: 'Home' },
                    { time: '12:00 AM', task: 'Sleep', loc: 'Bed', map: 'Home' },
                ];
            } else if (modeId === 'celebration') {
                schedule = [
                    { time: '08:00 AM', task: 'Excited Wake Up', loc: 'Home', map: 'Home' },
                    { time: '10:00 AM', task: 'Celebration Brunch', loc: 'Brunch Spot', map: 'Best Brunch' },
                    { time: '01:00 PM', task: 'Shopping', loc: 'City Center', map: 'Shopping Mall' },
                    { time: '04:00 PM', task: 'Meet Friends', loc: 'Social Hub', map: 'Lounge' },
                    { time: '07:00 PM', task: 'Dinner Party', loc: 'Fine Dining', map: 'Vegetarian Fine Dining' },
                    { time: '09:30 PM', task: 'Music & Dancing', loc: 'Club', map: 'Club' },
                    { time: '12:00 AM', task: 'Home & Happy', loc: 'Home', map: 'Home' },
                ];
            } else {
                 schedule = [
                    { time: '08:00 AM', task: 'Morning Routine', loc: 'Home', map: 'Home' },
                    { time: '09:00 AM', task: 'Plan the Day', loc: 'Home', map: 'Home' },
                    { time: '10:30 AM', task: 'Primary Activity', loc: 'Studio', map: 'Office' },
                    { time: '01:00 PM', task: 'Lunch Break', loc: 'Cafe', map: 'Vegetarian Cafe' },
                    { time: '03:00 PM', task: 'Errands', loc: 'City', map: 'City Center' },
                    { time: '06:00 PM', task: 'Evening Walk', loc: 'Park', map: 'Park' },
                    { time: '08:00 PM', task: 'Dinner', loc: 'Home', map: 'Vegetarian Restaurant' },
                    { time: '10:00 PM', task: 'Relaxation', loc: 'Living Room', map: 'Home' },
                    { time: '12:00 AM', task: 'Sleep', loc: 'Bed', map: 'Home' },
                ];
            }

            const music = musicMap[modeId]?.[musicType] || musicMap['happy']['Hollywood'];
            const meals = foodMap[modeId]?.[cuisineType] || foodMap['happy']['Global'];

            return { schedule, music, meals };
        };

        // --- MAIN APP COMPONENT ---

        function App() {
            const [currentDay, setCurrentDay] = useState(DAYS[new Date().getDay() === 0 ? 6 : new Date().getDay() - 1]);
            const [activeMode, setActiveMode] = useState('HAPPY');
            const [cuisineType, setCuisineType] = useState('Global');
            const [musicType, setMusicType] = useState('Hollywood');
            const [currentTime, setCurrentTime] = useState(new Date());
            const [prompt, setPrompt] = useState('');
            const [isProcessing, setIsProcessing] = useState(false);
            const [aiInsight, setAiInsight] = useState('');
            
            // Location
            const [location, setLocation] = useState({ city: '', state: '', country: '' });
            const [showLocationSettings, setShowLocationSettings] = useState(false);

            // Tasks
            const [customTasks, setCustomTasks] = useState([]);
            const [newTaskTime, setNewTaskTime] = useState('12:00 PM');
            const [newTaskText, setNewTaskText] = useState('');
            const [showAddForm, setShowAddForm] = useState(false);
            const [reminders, setReminders] = useState({});

            useEffect(() => {
                const timer = setInterval(() => setCurrentTime(new Date()), 1000);
                return () => clearInterval(timer);
            }, []);

            const handleAnalyze = (e) => {
                e.preventDefault();
                if (!prompt.trim()) return;
                setIsProcessing(true);

                setTimeout(() => {
                    const lower = prompt.toLowerCase();
                    let newMode = activeMode;
                    
                    if (lower.includes('sick') || lower.includes('ill')) newMode = 'SICK';
                    else if (lower.includes('party') || lower.includes('fun')) newMode = 'CELEBRATION';
                    else if (lower.includes('work') || lower.includes('focus')) newMode = 'FOCUSSED';
                    else if (lower.includes('hike') || lower.includes('trip')) newMode = 'ADVENTURE';
                    else if (lower.includes('sad') || lower.includes('tired')) newMode = 'LOW';
                    else if (lower.includes('happy') || lower.includes('good')) newMode = 'HAPPY';
                    else if (lower.includes('energy') || lower.includes('yes')) newMode = 'EXCITED';

                    setActiveMode(newMode);
                    setAiInsight(`Mood Shift Detected: ${MODE_CONFIG[newMode].label} protocols engaged.`);
                    setIsProcessing(false);
                    setPrompt('');
                }, 800);
            };

            const handleAddTask = (e) => {
                e.preventDefault();
                if (!newTaskText) return;
                setCustomTasks([...customTasks, { time: newTaskTime, task: newTaskText, loc: 'Custom', map: 'Home', manual: true }]);
                setNewTaskText('');
                setShowAddForm(false);
            };

            const toggleReminder = (index) => {
                setReminders(prev => ({ ...prev, [index]: !prev[index] }));
                if (!reminders[index]) { alert("Reminder Set!"); }
            };

            const getLocationString = () => {
                const parts = [location.city, location.state, location.country].filter(Boolean);
                return parts.length > 0 ? ` near ${parts.join(', ')}` : '';
            };

            const openMaps = (query) => {
                const finalQuery = query + getLocationString();
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(finalQuery)}`, '_blank');
            };
            
            const openYoutube = (query) => window.open(`https://www.youtube.com/results?search_query=${encodeURIComponent("vegetarian recipe " + query)}`, '_blank');
            const openSpotify = (track, artist) => window.open(`https://open.spotify.com/search/${encodeURIComponent(track + " " + artist)}`, '_blank');

            const modeConfig = MODE_CONFIG[activeMode];
            const generatedPlan = useMemo(() => generateDailyPlan(activeMode.toLowerCase(), currentDay, cuisineType, musicType), [activeMode, currentDay, cuisineType, musicType]);
            
            const fullSchedule = [...generatedPlan.schedule, ...customTasks].sort((a, b) => {
                const dateA = new Date('1970/01/01 ' + a.time);
                const dateB = new Date('1970/01/01 ' + b.time);
                return dateA - dateB;
            });

            return (
                <div className={`min-h-screen w-full font-sans transition-colors duration-700 bg-gradient-to-br ${modeConfig.gradient}`}>
                    {/* Background Ambience */}
                    <div className="fixed top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0">
                        <div className={`absolute top-[-10%] left-[-10%] w-[50%] h-[50%] rounded-full opacity-40 blur-[100px] mix-blend-multiply bg-white`}></div>
                        <div className={`absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] rounded-full opacity-40 blur-[100px] mix-blend-multiply ${modeConfig.text.replace('text', 'bg').replace('900', '200')}`}></div>
                    </div>

                    <div className="relative z-10 max-w-7xl mx-auto p-4 md:p-8 flex flex-col lg:flex-row gap-8 min-h-screen">
                        
                        {/* --- LEFT SIDEBAR --- */}
                        <div className="w-full lg:w-1/3 flex flex-col gap-6">
                            
                            {/* Brand Header */}
                            <div className="backdrop-blur-xl bg-white/60 border border-white/40 p-8 rounded-3xl shadow-xl text-center">
                                <h1 className={`text-6xl font-black tracking-tighter ${modeConfig.text} mb-2`}>
                                    DAY<span className="opacity-50">.OS</span>
                                </h1>
                                <div className={`text-sm font-bold uppercase tracking-widest ${modeConfig.text} opacity-60`}>
                                    {currentTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} â€¢ {currentDay}
                                </div>
                            </div>

                            {/* Location Tracker */}
                            <div className="backdrop-blur-xl bg-white/60 border border-white/40 p-4 rounded-3xl shadow-sm">
                                <div 
                                    className="flex items-center justify-between text-slate-500 font-bold uppercase tracking-widest text-xs mb-2 cursor-pointer hover:text-slate-700"
                                    onClick={() => setShowLocationSettings(!showLocationSettings)}
                                >
                                    <div className="flex items-center gap-2"><Icon path={ICONS.Globe} size={14} /> Location</div>
                                    <span>{showLocationSettings ? 'Close' : 'Edit'}</span>
                                </div>
                                
                                {showLocationSettings ? (
                                    <div className="grid grid-cols-1 gap-2 animate-in fade-in slide-in-from-top-2">
                                        <input className="bg-white/50 border border-white rounded-xl px-3 py-2 text-sm outline-none placeholder-slate-400" placeholder="City" value={location.city} onChange={e => setLocation({...location, city: e.target.value})} />
                                        <input className="bg-white/50 border border-white rounded-xl px-3 py-2 text-sm outline-none placeholder-slate-400" placeholder="State" value={location.state} onChange={e => setLocation({...location, state: e.target.value})} />
                                        <input className="bg-white/50 border border-white rounded-xl px-3 py-2 text-sm outline-none placeholder-slate-400" placeholder="Country" value={location.country} onChange={e => setLocation({...location, country: e.target.value})} />
                                    </div>
                                ) : (
                                    <div className="text-sm font-bold text-slate-700 truncate">
                                        <Icon path={ICONS.MapPin} size={12} className="inline mr-1" />
                                        {location.city || location.country ? `${location.city}, ${location.country}` : 'Set Location for Local Maps'}
                                    </div>
                                )}
                            </div>

                            {/* AI Input */}
                            <div className="backdrop-blur-xl bg-white/60 border border-white/40 p-2 rounded-3xl shadow-lg focus-within:ring-2 ring-white transition-all">
                                <form onSubmit={handleAnalyze} className="flex gap-2">
                                    <input 
                                        type="text" 
                                        value={prompt}
                                        onChange={(e) => setPrompt(e.target.value)}
                                        placeholder="How are you feeling today?"
                                        className={`w-full bg-transparent outline-none text-sm px-4 font-medium placeholder-slate-500 ${modeConfig.text}`}
                                    />
                                    <button type="submit" className={`p-3 rounded-2xl text-white shadow-md transition-all hover:scale-105 ${modeConfig.accent}`}>
                                        {isProcessing ? <Icon path={ICONS.Loader2} size={18} className="animate-spin" /> : <Icon path={ICONS.Send} size={18} />}
                                    </button>
                                </form>
                            </div>

                            {/* Mode Grid */}
                            <div className="grid grid-cols-2 gap-3">
                                {Object.values(MODE_CONFIG).map((mode) => (
                                    <button
                                        key={mode.id}
                                        onClick={() => setActiveMode(mode.id.toUpperCase())}
                                        className={`p-4 rounded-2xl border flex flex-col items-center gap-2 transition-all duration-300 ${activeMode === mode.id.toUpperCase() ? `bg-white/80 border-white shadow-lg scale-105` : `bg-white/20 border-white/20 hover:bg-white/40`}`}
                                    >
                                        <Icon path={ICONS[mode.icon]} size={24} className={activeMode === mode.id.toUpperCase() ? modeConfig.text : 'text-slate-500'} />
                                        <span className={`text-[10px] font-bold uppercase tracking-widest ${activeMode === mode.id.toUpperCase() ? modeConfig.text : 'text-slate-500'}`}>{mode.label}</span>
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* --- RIGHT DASHBOARD --- */}
                        <div className="w-full lg:w-2/3 flex flex-col gap-6">
                            
                            {/* Dashboard Header */}
                            <div className="backdrop-blur-xl bg-white/60 border border-white/40 p-6 rounded-3xl shadow-sm flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className={`p-3 rounded-full ${modeConfig.accent} text-white shadow-lg`}>
                                        <Icon path={ICONS[modeConfig.icon]} size={24} />
                                    </div>
                                    <div>
                                        <h2 className={`text-xl font-bold ${modeConfig.text}`}>{modeConfig.label} Mode Active</h2>
                                        <p className="text-slate-600 text-sm">{aiInsight || modeConfig.desc}</p>
                                    </div>
                                </div>
                                <div className="hidden md:block text-right">
                                    <div className="text-xs font-bold uppercase tracking-widest text-slate-400">Dietary Preference</div>
                                    <div className={`font-bold ${modeConfig.text}`}>Vegetarian ðŸŒ±</div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                {/* Music Player */}
                                <div className="backdrop-blur-xl bg-white/80 border border-white/50 p-6 rounded-3xl shadow-sm hover:shadow-xl transition-all relative overflow-hidden flex flex-col justify-between min-h-[220px]">
                                    <div className={`absolute top-0 right-0 p-4 opacity-10 ${modeConfig.text}`}><Icon path={ICONS.Music} size={80} /></div>
                                    <div className="flex gap-2 mb-4 relative z-10">
                                        {MUSIC_TYPES.map(type => (
                                            <button key={type} onClick={() => setMusicType(type)} className={`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${musicType === type ? `${modeConfig.accent} text-white shadow-md` : 'bg-white/50 text-slate-500 hover:bg-white'}`}>
                                                {type}
                                            </button>
                                        ))}
                                    </div>
                                    <div onClick={() => openSpotify(generatedPlan.music.track, generatedPlan.music.artist)} className="relative z-10 cursor-pointer group">
                                        <div className="flex items-center gap-2 mb-2">
                                            <div className="p-2 bg-green-500 rounded-full text-white group-hover:scale-110 transition-transform"><Icon path={ICONS.PlayCircle} size={20} /></div>
                                            <span className="text-xs font-bold uppercase tracking-widest text-slate-400">Spotify Connect</span>
                                        </div>
                                        <div className={`text-2xl font-bold ${modeConfig.text} leading-tight`}>{generatedPlan.music.track}</div>
                                        <div className="text-slate-500 font-medium">{generatedPlan.music.artist}</div>
                                    </div>
                                </div>

                                {/* Food Card */}
                                <div className="backdrop-blur-xl bg-white/60 border border-white/50 p-6 rounded-3xl shadow-sm flex flex-col min-h-[220px]">
                                    <div className="flex flex-col gap-2 mb-4">
                                        <div className="flex items-center gap-2">
                                            <Icon path={ICONS.Utensils} className={modeConfig.text} size={20} />
                                            <span className="text-sm font-bold uppercase tracking-widest text-slate-500">Gastronomy</span>
                                        </div>
                                        <div className="flex gap-1 flex-wrap">
                                            {CUISINES.map(cuisine => (
                                                <button key={cuisine} onClick={() => setCuisineType(cuisine)} className={`px-2 py-1 rounded-lg text-[9px] font-bold uppercase transition-all ${cuisineType === cuisine ? `${modeConfig.accent} text-white shadow-sm` : 'bg-white/40 text-slate-400 hover:bg-white'}`}>
                                                    {cuisine}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                    <div className="space-y-3 overflow-y-auto max-h-[160px] custom-scrollbar pr-2">
                                        {generatedPlan.meals.map((meal, i) => ( 
                                            <div key={i} className="flex justify-between items-center bg-white/50 p-2 rounded-xl border border-white/50">
                                                <div>
                                                    <div className="text-[10px] font-bold uppercase text-slate-400">{meal.type}</div>
                                                    <div className={`text-sm font-bold ${modeConfig.text}`}>{meal.item}</div>
                                                </div>
                                                <div className="flex gap-1">
                                                    <button onClick={() => openYoutube(meal.item)} className="p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200" title="Cook This"><Icon path={ICONS.Youtube} size={14} /></button>
                                                    <button onClick={() => openMaps(meal.item + " restaurant")} className="p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200" title="Eat Out"><Icon path={ICONS.Navigation} size={14} /></button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Full Day Itinerary */}
                            <div className="flex-grow backdrop-blur-xl bg-white/60 border border-white/40 p-6 rounded-3xl shadow-lg flex flex-col min-h-[500px]">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className={`text-xl font-bold ${modeConfig.text} flex items-center gap-2`}><Icon path={ICONS.Clock} size={20} /> Full Day Itinerary</h3>
                                    <button onClick={() => setShowAddForm(!showAddForm)} className={`px-4 py-2 rounded-xl text-sm font-bold text-white shadow-md hover:scale-105 transition-all ${modeConfig.accent}`}>
                                        {showAddForm ? 'Close' : '+ Add Task'}
                                    </button>
                                </div>

                                {showAddForm && (
                                    <div className="mb-6 bg-white/80 p-4 rounded-2xl border border-white shadow-inner animate-in fade-in slide-in-from-top-4">
                                        <div className="flex gap-2">
                                            <select value={newTaskTime} onChange={(e) => setNewTaskTime(e.target.value)} className="bg-slate-50 border-none rounded-xl text-sm font-bold text-slate-600 px-3 outline-none">
                                                {Array.from({length: 17}, (_, i) => i + 8).map(h => {
                                                    const time = h > 12 ? `${h-12}:00 PM` : (h === 12 ? '12:00 PM' : `${h}:00 AM`);
                                                    return <option key={time} value={time}>{time}</option>
                                                })}
                                                <option value="12:00 AM">12:00 AM</option>
                                            </select>
                                            <input type="text" value={newTaskText} onChange={(e) => setNewTaskText(e.target.value)} placeholder="What needs to be done?" className="flex-grow bg-slate-50 border-none rounded-xl text-sm px-4 outline-none placeholder-slate-400" />
                                            <button onClick={handleAddTask} className={`p-2 rounded-xl text-white ${modeConfig.accent}`}><Icon path={ICONS.Plus} size={20} /></button>
                                        </div>
                                    </div>
                                )}

                                <div className="flex-grow overflow-y-auto space-y-4 pr-2 custom-scrollbar">
                                    {fullSchedule.map((item, index) => (
                                        <div key={index} className="group relative flex gap-4 p-3 rounded-2xl hover:bg-white/60 transition-colors">
                                            <div className="w-16 pt-1 text-right text-xs font-bold text-slate-400 group-hover:text-slate-600">{item.time}</div>
                                            <div className="relative pt-1">
                                                <div className={`w-3 h-3 rounded-full ${modeConfig.accent} shadow-sm z-10 relative ring-2 ring-white`}></div>
                                                {index !== fullSchedule.length - 1 && <div className="absolute top-4 left-[5px] w-0.5 h-16 bg-slate-200/50"></div>}
                                            </div>
                                            <div className="flex-grow flex justify-between items-start">
                                                <div>
                                                    <div className={`text-sm font-bold ${modeConfig.text}`}>{item.task}</div>
                                                    <div className="text-xs text-slate-500 mt-1 flex items-center gap-1">
                                                        <Icon path={ICONS.MapPin} size={10} /> {item.loc}
                                                        {item.manual && <span className="bg-slate-200 text-slate-600 px-1 rounded-[4px] text-[9px] uppercase font-bold">Manual</span>}
                                                    </div>
                                                </div>
                                                <div className="flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                                    <button onClick={() => toggleReminder(index)} className={`p-1.5 rounded-lg transition-colors ${reminders[index] ? 'bg-yellow-100 text-yellow-600' : 'bg-slate-100 text-slate-400 hover:text-slate-600'}`} title="Set Reminder">
                                                        <Icon path={reminders[index] ? ICONS.CheckCircle2 : ICONS.Bell} size={14} />
                                                    </button>
                                                    <button onClick={() => openMaps(item.map)} className="p-1.5 bg-blue-50 text-blue-500 rounded-lg hover:bg-blue-100" title="Get Directions">
                                                        <Icon path={ICONS.Navigation} size={14} />
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
